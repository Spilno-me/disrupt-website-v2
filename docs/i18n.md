# Internationalization (i18n) Guide

Complete guide to the multi-language system powering the Disrupt website, supporting 5 languages with RTL layout support.

## ğŸŒ Supported Languages

- ğŸ‡ºğŸ‡¸ **English** (en) - Default language
- ğŸ‡ªğŸ‡¸ **Spanish** (es) - EspaÃ±ol  
- ğŸ‡®ğŸ‡¹ **Italian** (it) - Italiano
- ğŸ‡¸ğŸ‡¦ **Arabic** (ar) - Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© (RTL support)
- ğŸ‡«ğŸ‡· **French** (fr) - FranÃ§ais

## ğŸ—ï¸ Architecture Overview

### Modern i18n System
Built with performance and developer experience in mind:

- **State Management**: Zustand store with persistence
- **Type Safety**: Full TypeScript support with autocomplete
- **Lazy Loading**: Translation files loaded on demand
- **Persistence**: Language preferences saved to localStorage
- **RTL Support**: Automatic layout direction switching
- **Minimal Dependencies**: Only Zustand for state management

### File Structure
```
src/i18n/
â”œâ”€â”€ constants.ts           # Language configurations
â”œâ”€â”€ types.ts              # TypeScript interfaces  
â”œâ”€â”€ utils.ts              # Translation utilities
â”œâ”€â”€ translations.ts       # Translation loading logic
â”œâ”€â”€ storage.ts            # localStorage persistence
â”œâ”€â”€ dom.ts                # DOM manipulation (RTL)
â”œâ”€â”€ i18nContext.tsx       # React context provider
â”œâ”€â”€ index.ts              # Main exports
â””â”€â”€ locales/              # Translation files
    â”œâ”€â”€ en.json           # English (default)
    â”œâ”€â”€ es.json           # Spanish
    â”œâ”€â”€ it.json           # Italian
    â”œâ”€â”€ ar.json           # Arabic
    â””â”€â”€ fr.json           # French
```

### Store Architecture
```
src/stores/
â””â”€â”€ i18nStore.ts          # Zustand state management
```

### Components
```
src/components/
â”œâ”€â”€ I18nLoader.tsx        # Loading component
â””â”€â”€ ui/
    â””â”€â”€ language-switcher.tsx  # Language selector
```

### Hooks
```
src/hooks/
â””â”€â”€ useI18n.ts           # Main i18n hook
```

## ğŸš€ Usage

### Basic Translation
```tsx
import { useTranslation } from '@/hooks/useI18n'

function MyComponent() {
  const { t } = useTranslation()
  
  return (
    <div>
      <h1>{t('hero.title')}</h1>
      <p>{t('hero.description')}</p>
    </div>
  )
}
```

### Language Information
```tsx
import { useI18n } from '@/hooks/useI18n'

function LanguageInfo() {
  const { currentLanguage, isRTL, isLoading } = useI18n()
  
  if (isLoading) return <div>Loading...</div>
  
  return (
    <div className={isRTL ? 'rtl' : 'ltr'}>
      <p>Current: {currentLanguage.nativeName}</p>
      <p>Direction: {isRTL ? 'Right-to-Left' : 'Left-to-Right'}</p>
    </div>
  )
}
```

### Language Switching
```tsx
import { useI18n } from '@/hooks/useI18n'

function LanguageSwitcher() {
  const { currentLanguage, availableLanguages, switchLanguage } = useI18n()
  
  return (
    <select 
      value={currentLanguage.code}
      onChange={(e) => switchLanguage(e.target.value as SupportedLanguage)}
    >
      {availableLanguages.map(lang => (
        <option key={lang.code} value={lang.code}>
          {lang.nativeName}
        </option>
      ))}
    </select>
  )
}
```

## ğŸ”§ Translation Files Structure

### JSON Schema
```json
{
  "hero": {
    "title": "Page title text",
    "description": "Page description text"
  },
  "features": {
    "title": "Section title",
    "subtitle": "Section subtitle",
    "cards": {
      "hours": {
        "title": "Feature card title",
        "description": "Feature card description"
      },
      "costs": {
        "title": "Feature card title", 
        "description": "Feature card description"
      },
      "automation": {
        "title": "Feature card title",
        "description": "Feature card description"
      }
    }
  },
  "contact": {
    "form": {
      "title": "Contact form title",
      "subtitle": "Contact form subtitle",
      "labels": {
        "name": "Name field label",
        "email": "Email field label",
        "company": "Company field label",
        "message": "Message field label",
        "placeholder": "Message placeholder",
        "privacyPolicy": "Privacy policy checkbox text"
      },
      "button": {
        "submit": "Submit button text",
        "submitting": "Submitting state text"
      },
      "validation": {
        "emailRequired": "Email required error",
        "emailInvalid": "Invalid email error",
        "companyRequired": "Company required error", 
        "privacyRequired": "Privacy consent required error"
      },
      "messages": {
        "successTitle": "Success toast title",
        "successDescription": "Success toast description",
        "errorTitle": "Error toast title",
        "errorFallback": "Generic error message"
      }
    },
    "info": {
      "title": "Contact info title",
      "subtitle": "Contact info subtitle",
      "contactLabel": "Contact section label",
      "followLabel": "Social media label",
      "comingSoon": "Coming soon text",
      "emailSubject": "Email subject line"
    }
  },
  "header": {
    "logo": "Company logo text",
    "bookCall": "CTA button text",
    "language": "Language selector label"
  },
  "footer": {
    "company": "Company name",
    "description": "Company description",
    "legal": {
      "privacy": "Privacy policy link",
      "terms": "Terms of service link"
    },
    "copyright": "Copyright text"
  },
  "legal": {
    "privacy": {
      "title": "Privacy policy page title",
      "lastUpdated": "Last updated text"
    },
    "terms": {
      "title": "Terms page title",
      "lastUpdated": "Last updated text"
    }
  }
}
```

### Sample Translation (Spanish)
```json
{
  "hero": {
    "title": "MÃ¡s que automatizaciÃ³n",
    "description": "Creemos que los equipos deberÃ­an gastar su energÃ­a en crear un impacto real, no ahogarse en tareas administrativas y repetitivas."
  },
  "features": {
    "title": "PrÃ³ximamente",
    "subtitle": "Disrupt integra software, servicios y consultorÃ­a en un sistema inteligente.",
    "cards": {
      "hours": {
        "title": "Horas, no meses",
        "description": "Los agentes de IA entregan resultados mÃ¡s rÃ¡pido que las soluciones tradicionales"
      }
    }
  }
}
```

## â• Adding a New Language

### 1. Update Language Configuration
Edit `src/i18n/constants.ts`:

```typescript
export const LANGUAGE_CONFIG: LanguageConfig[] = [
  // ... existing languages
  {
    code: 'de',
    name: 'German',
    nativeName: 'Deutsch',
    dir: 'ltr',
    flag: ''  // Flags removed by design choice
  }
]

export const SUPPORTED_LANGUAGE_CODES: readonly SupportedLanguage[] = [
  'en', 'es', 'it', 'ar', 'fr', 'de'  // Add new language code
] as const
```

### 2. Update TypeScript Types
Edit `src/i18n/types.ts`:

```typescript
export type SupportedLanguage = 'en' | 'es' | 'it' | 'ar' | 'fr' | 'de'
```

### 3. Create Translation File
Create `src/i18n/locales/de.json`:

```json
{
  "hero": {
    "title": "Mehr als Automatisierung",
    "description": "Wir glauben, dass Teams ihre Energie darauf verwenden sollten..."
  },
  "features": {
    "title": "Bald verfÃ¼gbar",
    "subtitle": "Disrupt integriert Software, Services und Beratung..."
  }
  // ... complete all translation keys
}
```

### 4. Test Implementation
- Start development server: `npm run dev`
- New language appears in language selector
- Verify all strings translate properly
- Test form validation messages
- Check RTL layout (if applicable)

## ğŸ”„ RTL (Right-to-Left) Support

### Automatic RTL Detection
The system automatically detects RTL languages:

```typescript
// Configured in language constants
{
  code: 'ar',
  name: 'Arabic', 
  nativeName: 'Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©',
  dir: 'rtl'  // Triggers RTL mode
}
```

### CSS RTL Styling
RTL styles are applied automatically via CSS:

```css
/* Automatic direction switching */
[dir="rtl"] {
  text-align: right;
}

/* RTL-specific margins */
[dir="rtl"] .ml-4 {
  margin-left: 0;
  margin-right: 1rem;
}

/* RTL flex direction */
[dir="rtl"] .flex-row {
  flex-direction: row-reverse;
}
```

### Component RTL Awareness
Components can adapt to RTL automatically:

```tsx
function MyComponent() {
  const { isRTL } = useI18n()
  
  return (
    <div className={`flex ${isRTL ? 'flex-row-reverse' : 'flex-row'}`}>
      <span className={isRTL ? 'ml-4' : 'mr-4'}>Content</span>
    </div>
  )
}
```

## ğŸ¯ Best Practices

### Translation Keys
- **Hierarchical structure**: Use nested objects for organization
- **Descriptive naming**: `contact.form.validation.emailRequired` 
- **Consistent naming**: Follow established patterns
- **Context clarity**: Make key purpose obvious

### Content Guidelines
- **Keep strings atomic**: One concept per translation key
- **Avoid concatenation**: Don't split sentences across keys
- **Handle pluralization**: Consider singular/plural forms
- **Cultural sensitivity**: Adapt content for local audiences

### Technical Considerations
- **Lazy loading**: Translation files load only when needed
- **Error handling**: Graceful fallbacks for missing translations
- **Type safety**: Use TypeScript for compile-time checks
- **Performance**: Minimal re-renders with Zustand

## ğŸ” Debugging

### Common Issues

#### Missing Translation Key
```javascript
// Returns the key itself if translation missing
t('non.existent.key') // â†’ 'non.existent.key'
```

#### Language Not Loading
```javascript
// Check browser console for loading errors
console.log('Available languages:', availableLanguages)
console.log('Current language:', currentLanguage)
console.log('Is loading:', isLoading)
```

#### RTL Layout Issues
```css
/* Debug RTL styles */
[dir="rtl"] * {
  border: 1px solid red !important;
}
```

### Development Tools

#### Translation Helper
```typescript
// Add to development builds for missing key detection
if (process.env.NODE_ENV === 'development') {
  const originalT = t
  t = (key: string) => {
    const result = originalT(key)
    if (result === key) {
      console.warn(`Missing translation key: ${key}`)
    }
    return result
  }
}
```

#### Language Testing
```typescript
// Quickly test all languages in development
const testAllLanguages = async () => {
  for (const lang of SUPPORTED_LANGUAGE_CODES) {
    await switchLanguage(lang)
    console.log(`Testing ${lang}:`, t('hero.title'))
  }
}
```

## ğŸ“Š Translation Management

### Workflow
1. **Developer adds new text**: Creates English key in `en.json`
2. **Translation needed**: Mark key for translation in other languages
3. **Translator works**: Updates non-English JSON files
4. **Review process**: Native speakers review translations
5. **Testing**: Verify translations in context
6. **Deployment**: Include updated translations in build

### Translation Tools

#### JSON Validation
```bash
# Validate all translation files
npm run validate-translations

# Check for missing keys across languages
npm run check-translation-completeness
```

#### Translation Coverage
```typescript
// Check translation completeness
const checkCoverage = (lang: SupportedLanguage) => {
  const english = require(`./locales/en.json`)
  const target = require(`./locales/${lang}.json`)
  
  const englishKeys = flattenObject(english)
  const targetKeys = flattenObject(target)
  
  const missing = Object.keys(englishKeys).filter(
    key => !targetKeys[key]
  )
  
  console.log(`${lang} missing keys:`, missing)
}
```

## ğŸš€ Performance Optimization

### Bundle Analysis
Translation files are dynamically imported to reduce initial bundle size:

```javascript
// Only load when language is selected
const translations = await import(`./locales/${language}.json`)
```

### Memory Management
- Previous language translations are garbage collected
- Only current language stays in memory
- Minimal impact on application performance

### Caching Strategy
```typescript
// Translation files cached by browser
// localStorage persists language preference
// No network requests for subsequent visits
```

## ğŸ§ª Testing

### Unit Tests
```typescript
import { renderWithI18n } from '@/test/i18n-test-utils'

test('component renders with correct translation', () => {
  const { getByText } = renderWithI18n(<MyComponent />, 'es')
  expect(getByText('MÃ¡s que automatizaciÃ³n')).toBeInTheDocument()
})
```

### Integration Tests
```typescript
test('language switching works correctly', async () => {
  const { switchLanguage, t } = useI18n()
  
  await switchLanguage('fr')
  expect(t('hero.title')).toBe('Plus qu\'automatisation')
  
  await switchLanguage('it')
  expect(t('hero.title')).toBe('PiÃ¹ di automazione')
})
```

### RTL Testing
```typescript
test('RTL layout applies correctly for Arabic', async () => {
  const { switchLanguage, isRTL } = useI18n()
  
  await switchLanguage('ar')
  expect(isRTL).toBe(true)
  expect(document.documentElement.dir).toBe('rtl')
})
```

## ğŸ”® Future Enhancements

### Planned Features
- **Pluralization support**: Handle singular/plural forms
- **Date/time localization**: Format dates per locale
- **Number formatting**: Currency and number formatting
- **Translation management UI**: Admin interface for translators
- **A/B testing**: Test different translations for optimization
- **SEO localization**: Localized meta tags and URLs

### Advanced Use Cases
- **Dynamic content translation**: API-driven content translation
- **Voice interface**: Text-to-speech in multiple languages
- **Accessibility**: Screen reader support for all languages
- **Progressive enhancement**: Graceful degradation for unsupported browsers